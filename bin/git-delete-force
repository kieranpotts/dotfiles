#!/bin/sh

# ==============================================================================
# Git alias to delete both the local and upstream versions of a branch, even
# if they have not been merged elsewhere.
#
# This is a more dangerous version of `git delete`. This risks permanently
# losing commits that don't exist in the history of any other branch, in
# neither the local nor tracked upstream repositories.
#
# Usage:
#
# ```
# git delete-force ([branch])
# ```
# ==============================================================================

branch="${1}"

if [ -z "${branch}" ]; then
  read -p "Type a branch name: " branch
fi

if [ -z "${branch}" ]; then
  echo "Require branch name" >&2
  exit 1
fi

git branch --delete --force ${branch}
git push --delete --force origin ${branch} 2> /dev/null

# TODO: Merge with `git delete`, prompting the user for confirmation of
# destructive delete operations.
